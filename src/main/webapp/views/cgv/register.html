<!DOCTYPE html>
<html lang="vi" id="top" xmlns:th="http://www.thymeleaf.org">
<th:block th:insert="/cgv/layouts/head"></th:block>
<body class=" customer-account-create">
<div class="wrapper">
    <div class="page">
        <th:block th:insert="/cgv/layouts/header"></th:block>
        <div class="main-container col1-layout">
            <div class="main">
                <div class="col-main">
                    <div class="account-wrap">
                        <div class="col2-set">
                            <div class="cgv-login-register-form">
                                <div class="r-login">
                                    <h2><span id="form-login-content"><a
                                            href="/login">Đăng nhập</a></span><span
                                            id="form-register-content" class="active">Đăng ký</span></h2>
                                    <div class="cgvfc form-register-content">
                                        <form class="cgv-signup-form" name="cgv-signup-form" id="cgv-signup-form"
                                              th:object="${user}" method="post" action="/register">

                                            <fieldset>
                                                <label for="r-fname">Tên<span>*</span></label>
                                                <input th:field="*{fullName}" type="text" id="r-fname"
                                                       name="register_fullname"
                                                       class="input-text required-entry" placeholder="Tên"
                                                       autocomplete="off">
                                                <small th:if="${#fields.hasErrors('fullName')}"
                                                       th:errors="*{fullName}"
                                                       style="color: red ; font-style: italic"></small>
                                                <label for="r-phone">Số điện thoại<span>*</span></label>
                                                <input th:field="*{phone}" type="text" id="r-phone"
                                                       name="register_phone"
                                                       class="input-text required-entry" placeholder="Số điện thoại"
                                                       autocomplete="off">
                                                <small th:if="${#fields.hasErrors('phone')}"
                                                       th:errors="*{phone}"
                                                       style="color: red ; font-style: italic"></small>
                                                <label for="r-email">Email<span>*</span></label>
                                                <input th:field="*{email}" type="text" id="r-email"
                                                       name="register_email"
                                                       class="input-text required-entry" placeholder="Email"
                                                       autocomplete="off">
                                                <small th:if="${#fields.hasErrors('email')}"
                                                       th:errors="*{email}"
                                                       style="color: red ; font-style: italic"></small>
                                                <small th:if="${emailError}" style="color: red ; font-style: italic">Email
                                                    đã tồn tại, yêu cầu đăng nhập!!</small>
                                                <label for="r-password">Mật khẩu<span>*</span></label>
                                                <input th:field="*{password}" type="password" id="r-password"
                                                       name="register_password"
                                                       class="input-text required-entry" placeholder="Mật khẩu"
                                                       autocomplete="new-password">
                                                <small th:if="${#fields.hasErrors('password')}"
                                                       th:errors="*{password}"
                                                       style="color: red ; font-style: italic"></small>

                                                <label for="r-email">Tuổi</label>
                                                <input th:field="*{age}" type="text" id="age" name="register_email"
                                                       class="input-text required-entry" placeholder="Tuổi"
                                                       autocomplete="off">
                                                <label for="r-fname" class="gender-title"><span class="sp-gender">Giới tính</span><span>*</span>
                                                    <input th:field="*{gender}" type="radio" name="r-gender"
                                                           id="male-gender" value="1" checked> Nam
                                                    <input th:field="*{gender}" type="radio" name="r-gender"
                                                           id="female-gender" value="0"> Nữ
                                                </label>
                                            </fieldset>
                                            <div class="terms-register">
                                                <label class="r-terms">
                                                    <input type="checkbox" checked="checked" name="cgv-termsdob"
                                                           id="cgv-termsdob" value="ok">Xác nhận email
                                                    chính xác và ngày sinh khớp với thông tin trên CMND/CCCD. Nếu không
                                                    trùng khớp, các thông tin này sẽ không được hỗ trợ cập nhật thay đổi
                                                    và có thể không được hưởng các <a href="#">Quyền lợi thành
                                                    viên</a><br/>
                                                    <input type="checkbox" checked="checked" name="cgv-terms"
                                                           id="cgv-terms" value="ok">Tôi đồng ý với <a
                                                        href='#'>Điều Khoản Sử Dụng
                                                    Của CGV</a> </label>
                                                <input type="submit" value="Đăng ký">
                                            </div>
                                            <div class="cgv-register-requirement"></div>
                                        </form>
                                    </div>
                                    <span id="error-validate"></span>
                                    <div id="correct"></div>
                                    <div id="seconds"></div>
                                </div>
                                <div class="l-login">
                                    <div id="slider-container">
                                        <div class="mySlides fade">
                                            <img src="https://www.cgv.vn/media/wysiwyg/2020/3.jpg"/>
                                        </div>
                                        <div class="mySlides fade">
                                            <img src="https://www.cgv.vn/media/wysiwyg/2020/1.jpg"/>
                                        </div>
                                        <div class="mySlides fade">
                                            <img src="https://www.cgv.vn/media/wysiwyg/2020/2.jpg"/>
                                        </div>
                                        <!-- Next and previous buttons -->
                                        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                                        <a class="next" onclick="plusSlides(1)">&#10095;</a>
                                    </div>
                                    <!-- The dots/circles -->
                                    <div class="cgv-dots">
                                        <span class="dot" onclick="currentSlide(0)"></span>
                                        <span class="dot" onclick="currentSlide(1)"></span>
                                        <span class="dot" onclick="currentSlide(2)"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="banner-login-page">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="reloading-mask" style="left: -2px; top: 0px;">
                        <p class="loader" id="loading_mask_loader">
                            <img src="https://www.cgv.vn/skin/frontend/cgv/default/images/ajax-loader.gif"
                                 alt="Loading...">
                            <br>Đang tải thông tin... </p>
                    </div>
                    <style type="text/css">
                        .icon-eye {
                            position: absolute;
                            right: 2em;
                            top: 17.2em;
                            height: 28px;
                            padding-top: 14px;
                            width: 24px;
                            text-align: center;
                            cursor: pointer;
                            background: url('https://www.cgv.vn/skin//frontend/cgv/default/images/eye_on.png');
                        }

                        .icon-eye.hide-pwd {
                            background: url('https://www.cgv.vn/skin//frontend/cgv/default/images/eye_off.png');
                        }

                        #correct {
                            padding: 20px;
                        }

                        #seconds,
                        .cgv-resendOtp {
                            text-align: center;
                            padding: 20px
                        }

                        #seconds {
                            color: #848d95;
                        }

                        .btn2 {
                            display: inline-block;
                            border-radius: 4px;
                            background-color: #e71a0f;
                            border: none;
                            color: #fff;
                            text-align: center;
                            padding: 10px;
                            width: 120px;
                            transition: all 0.5s;
                            cursor: pointer;
                            margin: 5px;
                        }

                        .btn2 span:after {
                            content: '\00bb';
                            position: absolute;
                            opacity: 0;
                            top: 0;
                            right: -20px;
                            transition: 0.5s;
                        }

                        .btn2 span {
                            cursor: pointer;
                            display: inline-block;
                            position: relative;
                            transition: 0.5s;
                        }

                        .l-login {
                            float: right;
                            padding: 0;
                            width: 45%;
                            border-left: 1px solid #ccc;
                        }

                        .r-login {
                            float: left;
                            width: 54%;
                        }

                        .l-login .mySlides {
                            display: none
                        }

                        .l-login img {
                            vertical-align: middle;
                            max-width: 100%;
                        }

                        .l-login #slider-container {
                            max-width: 1000px;
                            position: relative;
                            margin: auto;
                            text-align: center;
                        }

                        /* Next & previous buttons */

                        .l-login .prev,
                        .l-login .next {
                            cursor: pointer;
                            position: absolute;
                            top: 50%;
                            width: auto;
                            padding: 16px;
                            margin-top: -22px;
                            color: #cc977d;
                            font-weight: bold;
                            font-size: 18px;
                            transition: 0.6s ease;
                            border-radius: 0 3px 3px 0;
                            user-select: none;
                        }

                        .l-login .prev {
                            left: 0;
                        }

                        /* Position the "next button" to the right */

                        .l-login .next {
                            right: 0;
                            border-radius: 3px 0 0 3px;
                        }

                        /* On hover, add a black background color with a little bit see-through */

                        .l-login .prev:hover,
                        .l-login .next:hover {
                            background-color: rgba(0, 0, 0, 0.8);
                            color: #fff;
                        }

                        /* Caption text */

                        .l-login .text {
                            color: #ffffff;
                            font-size: 15px;
                            padding: 8px 12px;
                            position: absolute;
                            bottom: 8px;
                            width: 100%;
                            text-align: center;
                        }

                        /* Number text (1/3 etc) */

                        .l-login .numbertext {
                            color: #ffffff;
                            font-size: 12px;
                            padding: 8px 12px;
                            position: absolute;
                            top: 0;
                        }

                        .l-login .cgv-dots {
                            text-align: center;
                        }

                        /* The dots/bullets/indicators */

                        .l-login .dot {
                            cursor: pointer;
                            height: 15px;
                            width: 15px;
                            margin: 0 2px;
                            background-color: #999999;
                            border-radius: 50%;
                            display: inline-block;
                            transition: background-color 0.6s ease;
                        }

                        .l-login .active,
                        .l-login .dot:hover {
                            background-color: #e71a0f;
                        }

                        /* Fading animation */

                        .l-login .fade {
                            -webkit-animation-name: fade;
                            -webkit-animation-duration: 1.5s;
                            animation-name: fade;
                            animation-duration: 1.5s;
                        }

                        @-webkit-keyframes fade {
                            from {
                                opacity: .4
                            }
                            to {
                                opacity: 1
                            }
                        }

                        @keyframes fade {
                            from {
                                opacity: .4
                            }
                            to {
                                opacity: 1
                            }
                        }

                        /* On smaller screens, decrease text size */

                        @media only screen and (max-width: 300px) {
                            .l-login .prev,
                            .l-login .next,
                            .l-login .text {
                                font-size: 11px
                            }
                        }

                        .r-login #form-register-content a,
                        .r-login #form-login-content a {
                            color: #ddd;
                            padding: 18px 18px 10px;
                        }

                        .cgv-login-form,
                        .cgv-signup-form,
                        .cgv-new-password {
                            padding: 20px 20px 5px;
                            position: relative;
                        }

                        .r-login input[type=text],
                        .r-login input[type=password] {
                            width: 100%;
                            padding: 10px;
                            margin: 8px 0;
                            display: inline-block;
                            border: 1px solid #ccc;
                            border-radius: 2px;
                            box-sizing: border-box;
                        }

                        .r-login select {
                            width: 100%;
                            padding: 5px 5px;
                            margin: 8px 0;
                            display: inline-block;
                            border: 1px solid #ccc;
                            border-radius: 2px;
                            box-sizing: border-box;
                        }

                        .r-login label[for=r-birthday] {
                            display: block;
                        }

                        .r-login select.r-bday,
                        .r-login select.r-bmonth,
                        .r-login select.r-byear {
                            width: 20%;
                        }

                        .form-login-content .cgv-reset-password,
                        .form-login-content .cgv-verify-otp,
                        .cgv-new-otp,
                        .cgv-confirm-new-otp {
                            padding: 20px 20px 5px;
                        }

                        .form-login-content label[for=forgot-password] {
                        }

                        .r-login input.input-text.validation-failed,
                        .r-login .r-bday.validation-failed,
                        .r-login .r-bmonth.validation-failed,
                        .r-login .r-byear.validation-failed,
                        .r-login .validate-select.validation-failed {
                            border-color: #df280a;
                        }

                        .r-login input[type=submit],
                        .form-register-content input[type=button] {
                            width: 100%;
                            background-color: #e71a0f;
                            color: white;
                            padding: 14px 20px;
                            margin: 8px 0;
                            border: none;
                            border-radius: 4px;
                            cursor: pointer;
                            text-transform: uppercase;
                        }

                        .r-login input[type=submit]:hover {
                            background-color: #e71a0f;
                        }

                        .confirm_text {
                            clear: both;
                            text-align: center;
                        }

                        .form-register-content .confirm_text input[type="submit"],
                        .form-register-content .confirm_text button#cancelotp {
                            border: none;
                            padding: 10px;
                            font: inherit;
                            cursor: pointer;
                            outline: inherit;
                            width: auto;
                            margin: 20px 5px;
                        }

                        .cgv-login-captcha {
                            padding: 20px 20px 10px;
                            text-align: center;
                        }

                        .cgv-login-captcha span {
                            color: #e71a0f;
                            font-style: italic;
                        }

                        .cgv-login-forgotp-link {
                            padding: 0 20px 20px;
                            text-align: center;
                        }

                        .cgv-login-forgotp-link a:link,
                        .cgv-login-forgotp-link a:visited {
                            color: #4896fa;
                            font-size: 12px;
                        }

                        #captcha_user_login,
                        #captcha_user_create {
                            width: 80%;
                        }

                        .cgv-login-form .captcha-image,
                        .cgv-signup-form .captcha-image {
                            float: right;
                            padding-top: 8px;
                            width: 160px;
                        }

                        #captcha-input-box-user_create {
                            margin-top: 20px;
                            width: 50%;
                        }

                        .captcha-img-container {
                            margin-top: 20px;
                            width: 50%;
                        }

                        .captcha-input-container,
                        .captcha-img-container {
                            float: left;
                            clear: none;
                        }

                        .r-login label {
                            display: block;
                        }

                        .terms-register {
                            clear: both;
                        }

                        .cgv-signup-form span {
                            color: #e71a0f;
                        }

                        .cgv-register-requirement {
                            color: #e71a0f
                        }

                        /* Inner */

                        .cgv-login-register-form {
                            max-width: 100%;
                            padding: 0;
                            background: #fdfcf0;
                            z-index: 99999;
                        }

                        .cgv-login-register-form h2 {
                            background-color: #e71a0f;
                            color: #fff;
                            font-size: 15px;
                            font-weight: 600;
                            padding: 20px 20px 10px;
                            text-align: left;
                        }

                        .r-login h2 span {
                            color: #ddd;
                            cursor: pointer;
                            margin: 0 20px;
                            padding: 20px 15px 8px;
                            text-transform: uppercase;
                        }

                        .r-login h2 span.active {
                            border-bottom: 3px solid #fff;
                            color: #fff;
                        }

                        .r-login h2 span:hover {
                            color: #fff;
                        }

                        .cgv-login-form .captcha-image,
                        .cgv-signup-form .captcha-image {
                            float: right;
                            width: 160px;
                        }

                        .hide_content {
                            display: none !important;
                        }

                        .show_content {
                            display: block !important;
                        }

                        #error-validate {
                            color: #df280a;
                            display: inline-block;
                            padding-bottom: 20px;
                        }

                        #reloading-mask {
                            background: transparent url(https://www.cgv.vn/skin/adminhtml/default/enterprise/images/blank.gif) repeat scroll 0% 0%;
                            position: fixed;
                            color: #D85909;
                            font-size: 1.1em;
                            font-weight: bold;
                            text-align: center;
                            opacity: 0.8;
                            z-index: 500;
                            width: 100%;
                            height: 100%;
                            display: none;
                        }

                        #reloading-mask .loader {
                            position: fixed;
                            top: 45%;
                            left: 50%;
                            width: 200px;
                            margin-left: -105px;
                            padding: 15px 30px;
                            background: #FFF none repeat scroll 0% 0%;
                            border: 2px solid #FFF;
                            color: #D85909;
                            font-weight: bold;
                            text-align: center;
                            z-index: 1000;
                        }

                        .r-login label.gender-title {
                            margin: 4px 0 12px;
                            display: inline-block;
                        }

                        .gender-title .sp-gender {
                            display: none;
                        }

                        /* Extra small devices (phones, 600px and down) */

                        @media only screen and (max-width: 600px) {
                            .l-login,
                            .r-login {
                                width: 100%;
                                border: none
                            }

                            .r-login select.r-bday,
                            .r-login select.r-bmonth,
                            .r-login select.r-byear {
                                width: 32%;
                            }

                            .r-login label.gender-title {
                                display: inline-block;
                            }

                            .cgv-signup-form .gender-title span.sp-gender {
                                color: #222;
                                display: inline-block;
                            }

                            .l-login {
                                display: none;
                            }
                        }

                        /* Small devices (portrait tablets and large phones, 600px and up) */

                        @media only screen and (min-width: 600px) {
                        }

                        /* Medium devices (landscape tablets, 768px and down) */

                        @media only screen and (max-width: 768px) {
                            .l-login,
                            .r-login {
                                width: 100%;
                                border: none
                            }

                            .l-login #slider-container {
                                max-width: 760px;
                            }

                            .r-login h2 span {
                                font-size: 3.7vw;
                            }

                            .cgvfc fieldset label,
                            .cgvfc fieldset input,
                            #error-validate {
                                font-size: 3.7vw;
                            }

                            .r-login select.r-bday,
                            .r-login select.r-bmonth,
                            .r-login select.r-byear {
                                width: 32%;
                            }

                            .r-login label.gender-title {
                                display: inline-block;
                            }

                            .cgv-signup-form .gender-title span.sp-gender {
                                color: #222;
                                display: inline-block;
                            }
                        }

                        /* Medium devices (landscape tablets, 768px and up) */

                        @media only screen and (min-width: 768px) {
                        }

                        /* Large devices (laptops/desktops, 992px and up) */

                        @media only screen and (min-width: 992px) {
                        }

                        /* Extra large devices (large laptops and desktops, 1200px and up) */

                        @media only screen and (min-width: 1200px) {
                        }
                    </style>
                    <script type="text/javascript">
                        //<![CDATA[
                        // var dataForm = new VarienForm('cgv-signup-form', true);
                        //]]>
                        var timer2 = "1:00";
                        var isAllowed = true,
                            isActive = false;
                        var countAllowed = tempAllowed = 3;
                        //khai báo biến slideIndex đại diện cho slide hiện tại
                        var slideIndex = 0;

                        // KHai bào hàm hiển thị slide
                        function showSlides() {
                            var i;
                            var slides = document.getElementsByClassName("mySlides");
                            var dots = document.getElementsByClassName("dot");
                            for (i = 0; i < slides.length; i++) {
                                slides[i].style.display = "none";
                            }
                            for (i = 0; i < dots.length; i++) {
                                dots[i].className = dots[i].className.replace(" active", "");
                            }
                            slideIndex++;

                            if (slideIndex > slides.length) {
                                slideIndex = 1;
                            }
                            slides[slideIndex - 1].style.display = "block";
                            dots[slideIndex - 1].className += " active";
                            setTimeout(showSlides, 5000);
                        }

                        showSlides(slideIndex = 0);

                        // Next/previous controls
                        function plusSlides(n) {
                            showSlides(slideIndex += n);
                        }

                        function currentSlide(n) {
                            showSlides(slideIndex = n);
                        }

                        /*https://www.w3schools.com/howto/howto_js_slideshow.asp*/
                        $j(document).ready(function () {
                            //Change the label of $btn
                            $j('input#cgv-btnlogin[type="button"]').val($j('input#cgv-btnlogin[type="button"]').val() + ' (' + countAllowed + ')');
                        });

                        $j(".icon-eye").click(function () {
                            var x = document.getElementById("register_password");
                            if (x.type === "password") {
                                x.type = "text";
                                $j(this).addClass('hide-pwd');
                            } else {
                                $j(this).removeClass('hide-pwd');
                                x.type = "password";
                            }
                        });
                        $j(document).on('click', 'input#cgv-btnsignup[type=button]', function (e) {
                            e.preventDefault();
                            /* var frm = document.getElementsByName('cgv-signup-form')[0];
    frm.reset();  // Reset all form data
return false; // Prevent page refresh*/
                            var fullname = document.getElementById("register_fullname");
                            var phone = document.getElementById("register_phone");
                            var email = document.getElementById("register_email");
                            var password = document.getElementById("register_password");
                            var day = document.getElementById("r-day");
                            var month = document.getElementById("r-month");
                            var year = document.getElementById("r-year");
                            var m_gender = document.getElementById("male-gender");
                            var f_gender = document.getElementById("female-gender");
                            var city = document.getElementById("r-city");
                            var prefersite = document.getElementById("prefersite");
                            var captcha = document.getElementById('captcha_user_create');
                            var terms = document.getElementById("cgv-terms");
                            var termsdob = document.getElementById("cgv-termsdob");
                            var message = "";
                            var error_status = false;
                            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                            //var alphaExp = /^[\pL\s]+$/;///^[a-zA-Z]+$/;
                            var number_regex = /^[0-9]+$/;
                            if (fullname.value == "") {
                                message = "Họ tên chưa nhập";
                                fullname.classList.add('validation-failed');
                                //$j("<p class='error-validate'>"+message+"</p>").insertAfter(fullname);

                                $j('#error-validate').html(message).insertAfter(fullname);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                fullname.focus();
                                return false;
                            } else if (fullname.value.trim().split(/\s+/).length < 2) {
                                message = "Họ tên phải có ít nhất 2 từ";

                                fullname.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(fullname);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                fullname.focus();
                                return false;
                            } else if (/[^a-zA-Z \-\/]/.test(nonAccentVietnamese(fullname.value))) {
                                message = "Họ tên không bao gồm kí tự đặc biệt và số";

                                fullname.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(fullname);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                fullname.focus();
                                return false;
                            }
                            if (error_status == false) {
                                $j('#error-validate').hide();
                            }

                            if (phone.value == "") {
                                message = "Số điện thoại chưa nhập";
                                phone.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(phone);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                phone.focus();
                                return false;
                            } else if (!phone.value.match(number_regex)) {
                                message = "Số điện thoại chưa chính xác";
                                phone.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(phone);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                phone.focus();
                                return false;
                            } else if (phone.value.trim().length < 10) {
                                message = "Số điện thoại phải ít nhất 10 số";
                                phone.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(phone);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                phone.focus();
                                return false;
                            }
                            if (email.value == "") {
                                message = "Email chưa nhập";
                                email.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(email);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                email.focus();
                                return false;
                            } else if (!regex.test(email.value)) {
                                message = "Email chưa chính xác";
                                email.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(email);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                email.focus();
                                return false;
                            }
                            if (password.value == "") {
                                message = "Mật khẩu chưa nhập";
                                password.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(password);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                password.focus();
                                return false;
                            } else {
                                if (password.value.length < 6) {
                                    message = "Mật khẩu chứa ít nhất 6 ký tự";
                                    password.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertAfter(password);
                                    $j('#error-validate').fadeIn('slow');
                                    error_status = true;
                                    password.focus();
                                    return false;
                                }
                            }
                            if (day.value == "") {
                                message = "Chọn ngày sinh";
                                day.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(day);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                day.focus();
                                return false;
                            } else if (!day.value.match(number_regex)) {
                                message = "Sai định dạng ngày";
                                day.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(day);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                day.focus();
                                return false;
                            } else {
                                if (day.value.length != 2) {
                                    message = "Ngày sinh là số";
                                    day.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertAfter(day);
                                    $j('#error-validate').fadeIn('slow');
                                    error_status = true;
                                    day.focus();
                                    return false;
                                }
                            }
                            if (month.value == "") {
                                message = "Chưa chọn tháng sinh";
                                month.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(month);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                month.focus();
                                return false;
                            } else if (!month.value.match(number_regex)) {
                                message = "Month is incorrect format";
                                month.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(month);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                month.focus();
                                return false;
                            } else {
                                if (month.value.length != 2) {
                                    message = "Month must be 2 numbers";
                                    month.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertAfter(month);
                                    $j('#error-validate').fadeIn('slow');
                                    error_status = true;
                                    month.focus();
                                    return false;
                                }
                            }
                            if (year.value == "") {
                                message = "Chưa chọn năm sinh";
                                year.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(year);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                year.focus();
                                return false;
                            } else if (!year.value.match(number_regex)) {
                                message = "Year is incorrect format";
                                year.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(year);
                                $j('#error-validate').fadeIn('slow');
                                error_status = true;
                                year.focus();
                                return false;
                            } else {
                                if (year.value.length < 4) {
                                    message = "Year must be 4 numbers at least";
                                    year.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertAfter(year);
                                    $j('#error-validate').fadeIn('slow');
                                    error_status = true;
                                    year.focus();
                                    return false;
                                }
                            }

                            if (m_gender.checked == false && f_gender.checked == false) {
                                message = "Vui lòng chọn giới tính";
                                m_gender.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(m_gender);
                                $j('#error-validate').fadeIn('slow');
                                m_gender.focus();
                                return false;
                            }
                            if (city.value == "") {
                                message = "Chưa chọn khu vực";
                                city.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(city);
                                $j('#error-validate').fadeIn('slow');
                                city.focus();
                                return false;
                            } else if (!city.value.match(number_regex)) {
                                message = "Region is incorrect format";
                                city.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(city);
                                $j('#error-validate').fadeIn('slow');
                                city.focus();
                                return false;
                            } else {
                                if (city.value.length < 2) {
                                    message = "Region must be 2 numbers at least";
                                    city.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertAfter(city);
                                    $j('#error-validate').fadeIn('slow');
                                    city.focus();
                                    return false;
                                }
                            }
                            if (prefersite.value == "") {
                                message = "Chưa chọn rạp yêu thích";
                                prefersite.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(prefersite);
                                $j('#error-validate').fadeIn('slow');
                                prefersite.focus();
                                return false;
                            } else if (!prefersite.value.match(number_regex)) {
                                message = "Prefer site is incorrect format";
                                prefersite.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(prefersite);
                                $j('#error-validate').fadeIn('slow');
                                prefersite.focus();
                                return false;
                            } else {
                                if (prefersite.value.length < 2) {
                                    message = "Prefer site must be 2 numbers at least";
                                    prefersite.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertAfter(prefersite);
                                    $j('#error-validate').fadeIn('slow');
                                    prefersite.focus();
                                    return false;
                                }
                            }
                            if (captcha.value == "") {
                                message = "Captcha is empty";
                                captcha.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(captcha);
                                $j('#error-validate').fadeIn('slow');
                                captcha.focus();
                                return false;
                            }
                            if (!terms.checked) {
                                message = "Vui lòng chấp nhận các điều khoản thành viên";
                                terms.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter('.r-terms');
                                $j('#error-validate').fadeIn('slow');
                                terms.focus();
                                return false;
                            }
                            if (!termsdob.checked) {
                                message = "Vui lòng đánh dấu xác nhận thông tin và đồng ý với Điều khoản Sử dụng của CGV";
                                termsdob.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter('.r-terms');
                                $j('#error-validate').fadeIn('slow');
                                termsdob.focus();
                                return false;
                            }
                            $j('#correct').fadeOut();
                            $j('#seconds').hide();
                            var r = confirm("Vui lòng xác nhận " + day.value + '/' + month.value + '/' + year.value + " là ngày sinh của bạn và " + phone.value + " là số điện thoại của bạn. Chúng tôi sẽ gửi mã xác thực đến số điện thoại này");
                            if (r == true) {
                                /*  do work */
                                // Grab all form data
                                var message = '';
                                var tmpresetHTML = "";
                                var tmpresetHTML2 = "";
                                var tmpresetHTML3 = "";
                                $j.ajax({
                                    type: 'POST',
                                    url: "https://www.cgv.vn/default/cinox/account/registeruserpost",
                                    data: $j(".cgv-signup-form").serialize(),
                                    beforeSend: function () {
                                        $j('#reloading-mask').show();
                                    }
                                }).done(function (response) {
                                    $j('#reloading-mask').hide();
                                    if (response.success == 200) {
                                        $j('.captcha-input-container,.captcha-img-container').hide();
                                        $j('#captcha_user_create').val('');
                                        //$j('#captcha-reload').click();
                                        tmpresetHTML += "<label for=\"forgot-password\">" + "Nhập mã xác thực" + "<span>*</span></label><input type=\"text\" name=\"cgv-newotp\" id=\"cgv-newotp\" />";
                                        //$j('.form-register-content').append(tmpresetHTML);
                                        //$j('.error').hide();
                                        tmpresetHTML2 += "<div class=\"confirm_text\"><button type=\"button\" class=\"btn2\" id=\"btn_confirmotp\">Xác nhận</button></div>";
                                        //$j('.form-register-content').append(tmpresetHTML);
                                        tmpresetHTML3 += "<p class='otp_msg'>" + response.otp_msg + "</p>";
                                        $j(tmpresetHTML).insertBefore($j('.captcha-input-container'));
                                        $j(tmpresetHTML2).insertAfter($j('.captcha-img-container'));
                                        $j(tmpresetHTML3).insertAfter($j('.captcha-img-container'));
                                        $j('#cgv-btnsignup').hide();
                                        //$j('.error').hide();
                                        //$j('.cgv-signup-form').hide();
                                        $j('fieldset').hide();
                                        $j('.terms-register').hide();
                                        $j('#cgv-newotp').focus();
                                        //$j('button#btn_confirmotpinfo').text($j('button#btn_confirmotpinfo').text()+' ('+countAllowed+')');
                                        //$j('#seconds').fadeIn('slow');
                                    } else {
                                        $j('#captcha_user_create').val('');
                                        $j('#captcha-reload').click();
                                        message = response.msg;
                                        if (response.field) {
                                            var idfield = document.getElementById(response.field);
                                            idfield.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(idfield);
                                            $j('#error-validate').fadeIn('slow');
                                            idfield.focus();
                                        }
                                    }
                                    $j('#correct').html(message);
                                    $j('#correct').fadeIn('slow');
                                }, 'json');
                            } else {
                                message = "You pressed Cancel!";
                                $j('#correct').html(message);
                                $j('#correct').fadeIn('slow');
                            }

                            isAllowed = false;
                        });

                        $j(document).on('click', 'button#cancelotp', function (e) {
                            e.preventDefault();
                            /*  do work */
                            // Grab all form data
                            $j('fieldset').show();
                            $j('.terms-register').show();
                            $j('#cgv-btnsignup').show();
                            $j('label[for=forgot-password]').remove();
                            $j('.confirm_text').remove();
                            //$j('#form-register-content').click();
                            isAllowed = false;
                        });
                        $j(document).on('click', 'button#btn_confirmotpinfo', function (e) {
                            e.preventDefault();
                            $j('.otp_msg').remove();
                            $j('button#btn_confirmotpinfo').text($j('button#btn_confirmotpinfo').text().replace(countAllowed, countAllowed - 1));
                            countAllowed--;
                            if (countAllowed == 0) {
                                alert("Wrong captcha too many times");
                                return !$j('button#btn_confirmotpinfo').attr('disabled', 'disabled');
                            }

                            var captcha = document.getElementById('captcha_user_create');
                            if (captcha.value == "") {
                                message = "Captcha is empty";
                                captcha.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(captcha);
                                $j('#error-validate').fadeIn('slow');
                                captcha.focus();
                                return false;
                            }
                            $j('fieldset').hide();
                            $j('.cgv-register-requirement').hide();
                            /*  do work */
                            // Grab all form data
                            var message = '';
                            var tmpresetHTML = "";
                            var tmpresetHTML2 = "";
                            var data = $j(".cgv-signup-form").serializeArray();
                            data.push({
                                name: 'confirm',
                                value: true
                            });
                            $j.post("https://www.cgv.vn/default/cinox/account/registeruserpost", data, function (response, status) {

                                captcha.classList.add('validation-passed');
                                $j('#error-validate').hide();
                                if (response.success == 200) {
                                    if (response.validate) {

                                        $j('label[for=forgot-password]').remove();
                                        $j('.confirm_text').remove();
                                        $j('#captcha_user_create').val('');
                                        $j('#captcha-reload').click();
                                        //$j('#correct').html('Xác thực thành công');
                                        //$j('#correct').fadeIn('slow');
                                        tmpresetHTML += "<label for=\"forgot-password\">" + "OTP" + "<span>*</span></label><input type=\"text\" name=\"cgv-newotp\" id=\"cgv-newotp\" />";
                                        //$j('.form-register-content').append(tmpresetHTML);
                                        //$j('.error').hide();
                                        tmpresetHTML2 += "<div class=\"confirm_text\"><button type=\"button\" class=\"btn2\" id=\"btn_confirmotp\">Xác nhận</button></div>";
                                        //$j('.form-register-content').append(tmpresetHTML);
                                        $j(tmpresetHTML).insertBefore($j('.captcha-input-container'));
                                        $j(tmpresetHTML2).insertAfter($j('.captcha-img-container'));
                                        countAllowed = tempAllowed;
                                        $j('button#btn_confirmotp').text($j('button#btn_confirmotp').text() + ' (' + countAllowed + ')');
                                        $j('#seconds').fadeIn('slow');
                                    } else {
                                        $j('#correct').html('Xác thực thất bại');
                                        $j('#correct').fadeIn('slow');

                                        $j('#seconds').fadeIn('slow');
                                        //setTimeout(function() { window.location.reload();},3000);
                                    }

                                } else {
                                    message = response.msg;
                                    var idfield = document.getElementById(response.field);
                                    idfield.classList.add('validation-failed');
                                    $j('#error-validate').html(message).insertBefore($j('.confirm_text'));
                                    $j('#error-validate').fadeIn('slow');
                                    $j('#' + response.field).focus();
                                }
                                // resetTimer();
                                // makeCountDown();
                                // $j('#correct').html(message);
                                // $j('#correct').fadeIn('slow');
                            }, 'json');
                            isAllowed = false;
                        });
                        $j(document).on('click', 'button#btn_confirmotp', function (e) {
                            e.preventDefault();
                            if ($j('.cgv-resendOtp')[0]) {
                                $j('.cgv-resendOtp').remove();
                            }
                            /*$j('button#btn_confirmotp').text($j('button#btn_confirmotp').text().replace(countAllowed,countAllowed-1));
                            countAllowed--;
                            if(countAllowed==0) {
                                alert('Wrong captcha too many times!');
                               return !$j('button#btn_confirmotp').attr('disabled','disabled');
                            }*/
                            var otp = document.getElementById('cgv-newotp');
                            //var captcha = document.getElementById('captcha_user_create');

                            if (otp.value == "") {
                                message = "OTP is empty";
                                otp.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(otp);
                                $j('#error-validate').fadeIn('slow');
                                otp.focus();
                                return false;
                            }
                            /*if(captcha.value==""){
                                message = "Captcha is empty!";
                                captcha.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(captcha);
                                $j('#error-validate').fadeIn('slow');
                                captcha.focus();
                                return false;
                            }*/
                            /*  do work */
                            // Grab all form data
                            var message = '';
                            var tmpresetHTML = "";
                            var data = $j(".cgv-signup-form").serializeArray();
                            data.push({
                                name: 'confirm',
                                value: true
                            }, {
                                name: 'otp',
                                value: otp.value
                            });
                            //data.push({name: 'otp', value: $j('#cgv-signup-form input#cgv-newotp').val()});
                            //console.log(data);return;
                            //console.log(data.serialize());return;

                            //console.log(data);

                            $j('.captcha-input-container,.captcha-img-container').hide();
                            $j.ajax({
                                type: 'POST',
                                url: "https://www.cgv.vn/default/cinox/account/registeruserpost",
                                data: $j(".cgv-signup-form").serialize(),
                                beforeSend: function () {
                                    $j('#reloading-mask').show();
                                }
                            }).done(function (response, status) {
                                //console.log(response);
                                $j('#reloading-mask').hide();
                                otp.classList.add('validation-passed');
                                //captcha.classList.add('validation-passed');
                                $j('#error-validate').hide();
                                if (response.success == 200) {
                                    $j("label[for=forgot-password]").remove();
                                    $j("#cgv-newotp").remove();
                                    $j('.confirm_text').remove();
                                    $j('.cgv-new-otp').remove();
                                    if (response.require == true) {
                                        $j('#correct').html(response.message);
                                        $j('#correct').fadeIn('slow');
                                    } else {
                                        /*window.location.replace("https://www.cgv.vn/default/customer/account/login/");
                                        window.location = "https://www.cgv.vn/default/customer/account/login/";*/
                                        window.location.replace(response.link);
                                        window.location = response.link;
                                    }
                                    //setInterval(function() { window.location.reload();},3000);
                                    //$j(location).attr('href',"https://www.cgv.vn/default/customer/account/login/");
                                    //window.location.replace("https://www.cgv.vn/default/customer/account/login/");
                                    //window.location = "https://www.cgv.vn/default/customer/account/login/";
                                } else {
                                    message = response.msg;
                                    if (response.field) {

                                        var idfield = document.getElementById(response.field);
                                        idfield.classList.add('validation-failed');
                                        if (response.field == 'cgv-newotp') {
                                            $j('#error-validate').html(message).insertAfter(idfield);
                                            idfield.focus();
                                        } else {
                                            $j('#error-validate').html(message).insertBefore($j('.confirm_text'));
                                            idfield.focus();
                                        }
                                        $j('#error-validate').fadeIn('slow');
                                        $j('#' + response.field).focus();
                                    } else {
                                        //idfield.focus();
                                        $j('#correct').html(message);
                                        $j('#correct').fadeIn('slow');
                                    }
                                    if (isActive == false)
                                        makeCountDown();
                                    $j('#seconds').fadeIn('slow');
                                }
                                //$j('#correct').html(message);
                                //$j('#correct').fadeIn('slow');
                            }, 'json');
                            isAllowed = false;
                        });
                        $j(document).on('click', 'button#cgv-resendOtp', function (e) {
                            e.preventDefault();
                            /*  do work */
                            var captcha = document.getElementById('captcha_user_create');
                            if (captcha.value == "") {
                                message = "Captcha is empty";
                                captcha.classList.add('validation-failed');
                                $j('#error-validate').html(message).insertAfter(captcha);
                                $j('#error-validate').fadeIn('slow');
                                captcha.focus();
                                return false;
                            }
                            // Grab all form data
                            var message = '';
                            var tmpresetHTML = tmpresetHTML2 = "";
                            //var data = $j(".cgv-signup-form").serializeArray();

                            //console.log($j($j(".cgv-signup-form")[0].elements).not('#register_email').serialize());return;
                            var data = $j(".cgv-signup-form [name]").not('#cgv-newotp').serializeArray();
                            //console.log(data);
                            data.push({
                                name: 'resend',
                                value: true
                            });
                            $j('#seconds').html();
                            $j.post("https://www.cgv.vn/default/cinox/account/registeruserpost", data, function (response) {
                                if (response.success == 200) {
                                    if (response.validate) {
                                        tmpresetHTML += "<label for=\"forgot-password\">" + "OTP" + "<span>*</span></label><input type=\"text\" name=\"cgv-newotp\" id=\"cgv-newotp\" />";
                                        //$j('.form-register-content').append(tmpresetHTML);
                                        //$j('.error').hide();
                                        tmpresetHTML2 += "<div class=\"confirm_text\"><button type=\"button\" class=\"btn2\" id=\"btn_confirmotp\">Xác nhận</button></div>";
                                        //$j('.form-register-content').append(tmpresetHTML);
                                        $j(tmpresetHTML).insertBefore($j('.captcha-input-container'));
                                        $j(tmpresetHTML2).insertAfter($j('.captcha-img-container'));
                                        $j('.cgv-resendOtp').remove();
                                        $j('#cgv-newotp').val('');
                                        $j('.error').hide();
                                        $j('.captcha-input-container,.captcha-img-container').hide();
                                        $j('#seconds').html('');
                                    } else {
                                        message = response.msg;
                                        var idfield = document.getElementById(response.field);
                                        idfield.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(idfield);
                                        $j('#error-validate').fadeIn('slow');
                                        idfield.focus();

                                        $j('#captcha_user_create').val('');
                                        $j('#captcha-reload').click();
                                    }

                                } else {
                                    message = response.msg;
                                    if (response.field == 'captcha_user_create') {
                                        var idfield = document.getElementById(response.field);
                                        idfield.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(idfield);
                                        $j('#error-validate').fadeIn('slow');
                                        idfield.focus();

                                        $j('#captcha_user_create').val('');
                                        $j('#captcha-reload').click();
                                    }
                                }
                                $j('#correct').html(message);
                                $j('#correct').fadeIn('slow');
                            }, 'json');
                            isAllowed = false;
                        });

                        function IsEmail(email) {
                            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                            if (!regex.test(email)) {
                                return false;
                            } else {
                                return true;
                            }
                        }

                        function nonAccentVietnamese(str) {
                            str = str.toLowerCase();
                            str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a");
                            str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e");
                            str = str.replace(/ì|í|ị|ỉ|ĩ/g, "i");
                            str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o");
                            str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u");
                            str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y");
                            str = str.replace(/đ/g, "d");
                            // Some system encode vietnamese combining accent as individual utf-8 characters
                            //str = str.replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g, ""); // Huyền sắc hỏi ngã nặng
                            //str = str.replace(/\u02C6|\u0306|\u031B/g, ""); // Â, Ê, Ă, Ơ, Ư
                            return str;
                        }

                        function resetTimer() {
                            timer2 = "1:00";
                        }

                        function makeCountDown() {
                            isActive = 1;
                            resetTimer();
                            var interval = setInterval(function () {


                                var timer = timer2.split(':');
                                //by parsing integer, I avoid all extra string processing
                                var minutes = parseInt(timer[0], 10);
                                var seconds = parseInt(timer[1], 10);
                                --seconds;
                                minutes = (seconds < 0) ? --minutes : minutes;
                                if (minutes == 0 && seconds == 0) {
                                    $j('#seconds').hide();
                                    $j("label[for=forgot-password]").remove();
                                    $j("#cgv-newotp").remove();
                                    $j('#error-validate').hide();
                                    $j('#captcha_user_create').val('');
                                    $j('#captcha-reload').click();
                                    $j('#btn_confirmotp').hide();
                                    $j('.captcha-input-container,.captcha-img-container').show();
                                    $j('.cgv-signup-form').append("<div class=\"cgv-resendOtp\"><button type=\"button\" class=\"btn2\" id=\"cgv-resendOtp\">Gởi lại mã xác thực</button></div>");
                                    isActive = false;
                                    clearInterval(interval);
                                }
                                seconds = (seconds < 0) ? 59 : seconds;
                                seconds = (seconds < 10) ? '0' + seconds : seconds;
                                //minutes = (minutes < 10) ?  minutes : minutes;
                                $j('#seconds').html('Resend in ' + seconds);
                                //$j('#seconds').append('Resend in '+seconds);
                                timer2 = minutes + ':' + seconds;
                            }, 1000);
                        }

                        function validateForm(elementId, type, elementId2 = null) {
                            var el = document.getElementById(elementId);
                            if (elementId2 != null) {
                                var el2 = document.getElementById(elementId2);
                            }

                            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                            var number_regex = /^[0-9]+$/;
                            switch (type) {
                                case 'email':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Email chưa nhập";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!regex.test(el.value)) {
                                        message = "Email chưa chính xác";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'fullname':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Họ tên chưa nhập";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (el.value.trim().split(/\s+/).length < 2) {
                                        message = "Họ tên phải có ít nhất 2 từ";

                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (/[^a-zA-Z \-\/]/.test(nonAccentVietnamese(el.value))) {
                                        message = "Họ tên không bao gồm kí tự đặc biệt và số";

                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'phone':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Số điện thoại chưa nhập";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!el.value.match(number_regex)) {
                                        message = "Số điện thoại chưa chính xác";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (el.value.trim().length < 10) {
                                        message = "Số điện thoại phải ít nhất 10 số";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'password':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Mật khẩu chưa nhập";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else {
                                        if (el.value.length < 6) {
                                            message = "Mật khẩu chứa ít nhất 6 ký tự";
                                            el.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(el);
                                            $j('#error-validate').fadeIn('slow');
                                            el.focus();
                                            return false;
                                        }
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'day':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Chọn ngày sinh";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!el.value.match(number_regex)) {
                                        message = "Sai định dạng ngày";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else {
                                        if (el.value.length != 2) {
                                            message = "Ngày sinh là số";
                                            el.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(el);
                                            $j('#error-validate').fadeIn('slow');
                                            el.focus();
                                            return false;
                                        }
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'month':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Chưa chọn tháng sinh";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!el.value.match(number_regex)) {
                                        message = "Month is incorrect format";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else {
                                        if (el.value.length != 2) {
                                            message = "Month must be 2 numbers";
                                            el.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(el);
                                            $j('#error-validate').fadeIn('slow');
                                            el.focus();
                                            return false;
                                        }
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'year':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Chưa chọn năm sinh";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!el.value.match(number_regex)) {
                                        message = "Year is incorrect format";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else {
                                        if (el.value.length < 4) {
                                            message = "Year must be 4 numbers at least";
                                            el.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(el);
                                            $j('#error-validate').fadeIn('slow');
                                            el.focus();
                                            return false;
                                        }
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'gender':
                                    el.classList.remove('validation-passed');
                                    if (el.checked == false && el2.checked == false) {
                                        message = "Vui lòng chọn giới tính";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'city':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Chưa chọn khu vực";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!el.value.match(number_regex)) {
                                        message = "City is incorrect format!";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else {
                                        if (el.value.length < 2) {
                                            message = "Region must be 2 numbers at least";
                                            el.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(el);
                                            $j('#error-validate').fadeIn('slow');
                                            el.focus();
                                            return false;
                                        }
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'prefersite':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Chưa chọn rạp yêu thích";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else if (!el.value.match(number_regex)) {
                                        message = "Prefer site is incorrect format";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    } else {
                                        if (el.value.length < 2) {
                                            message = "Prefer site must be 2 numbers at least";
                                            el.classList.add('validation-failed');
                                            $j('#error-validate').html(message).insertAfter(el);
                                            $j('#error-validate').fadeIn('slow');
                                            el.focus();
                                            return false;
                                        }
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'terms':
                                    el.classList.remove('validation-passed');
                                    if (!el.checked) {
                                        message = "Vui lòng chấp nhận các điều khoản thành viên";
                                        el.classList.add('validation-failed');
                                        //$j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').html('<br>' + message).insertAfter('.r-terms');
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'termsdob':
                                    el.classList.remove('validation-passed');
                                    if (!el.checked) {
                                        message = "Vui lòng đánh dấu xác nhận thông tin và đồng ý với Điều khoản Sử dụng của CGV";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;

                                case 'captcha':
                                    el.classList.remove('validation-passed');
                                    if (el.value == "") {
                                        message = "Captcha is empty";
                                        el.classList.add('validation-failed');
                                        $j('#error-validate').html(message).insertAfter(el);
                                        $j('#error-validate').fadeIn('slow');
                                        el.focus();
                                        return false;
                                    }
                                    el.classList.remove('validation-failed');
                                    el.classList.add('validation-passed');
                                    $j('#error-validate').hide();
                                    break;
                            }
                            return true;
                        }
                    </script>
                </div>
            </div>
        </div>
        <th:block th:insert="/cgv/layouts/footer"></th:block>
        <div id="wishlist_edit_action_container"></div>
    </div>
</div>
</body>
</html>